<html>

<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <link rel="stylesheet" href="/stylesheets/style.css" />
  <script src="/javascripts/netflix.js"></script>
  <link rel="stylesheet" href="/stylesheets/displaystyle.css" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
    rel="stylesheet" />

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
    crossorigin="anonymous"></script>

  <script src="https://kit.fontawesome.com/941dbd7ae9.js" crossorigin="anonymous"></script>

</head>

<body>
  <div class="container-fluid py-4">
    <div class="row justify-content-center">
      <div class="col-12">

     
        <div class="netflix-header">
          <div class="d-flex align-items-center">
            <img src="/images/netflix-logo.png" class="me-3" style="width: 30px;" />
            <div >
              <h2 class="text-danger mb-0 fw-bold">Netflix Programs</h2>
              <p class="text-white-50 mb-0">Manage Your Content Library</p>
            </div>
            <div class= "text-center" style="margin-left: auto;">
                  <a href="/programs/program_interface" class="btn btn-danger">
                    <i class="fa-solid fa-circle-plus"></i>
                    Add New Program
                  </a>
                </div>
          </div>
        </div>

   
        <div class="row">
          <div class="col-12">
            <% if(!status){ %>
              <div class="alert alert-danger d-flex align-items-center" role="alert">
                <i class="fas fa-exclamation-triangle me-3"></i>
                <div>
                  <h4 class="alert-heading">Error!</h4>
                  <p class="mb-0">
                    <%=message%>
                  </p>
                </div>
              </div>
              <% } else { %>

            
                <div class="card bg-dark border-danger">
                  <div class="card-header text-white mb-1" style="background-color: #e50914;">
                    <h5 class="mb-0">
                      <i class="fa-solid fa-film"></i>
                      All Programs (<%=data.length%> total)
                    </h5>
                  </div>
                  <div class="card-body p-0">
                    <div class="table-responsive">
                      <table class="table table-dark table-hover mb-0">
                        <thead>
                          <tr>
                            <th scope="col" class="text-center">#</th>
                            <th scope="col">Program Details</th>
                            <th scope="col">Category</th>
                            <th scope="col">Description</th>
                            <th scope="col" class="text-center">Status</th>
                            <th scope="col">Cast</th>
                            <th scope="col" class="text-center">Release Date</th>
                            <th scope="col" class="text-center">Poster</th>
                            <th scope="col" class="text-center">Video</th>
                            <th scope="col" class="text-center">Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <% data.map((item, i)=> { %>
                            <tr>
                              <td class="text-center fw-bold">
                                <%=i+1%>
                              </td>
                              <td>
                                <div class="fw-semibold">
                                  <%=item.programname %>
                                </div>
                              </td>
                              <td>
                                <div class="text-danger fw-semibold ">
                                  <%=item.categoryname %>
                                </div>
                                <div class="">
                                  <%=item.subcategoryname %>
                                </div>
                              </td>
                              <td >
                                <div style="max-width: 150px; max-height: 100px; overflow: hidden;">
                                  <%=item.description %>
                                </div>
                              </td>
                              <td class="text-center">
                                <% const badgeMap={ 'Top 10' : 'bg-warning text-dark' , 'Awarded recently' : 'bg-success' , 'Newly Added' : 'bg-info' , 'Soon to be removed' : 'bg-danger' } 
                                var badgeClass = badgeMap[item.status] || 'bg-secondary' %>
                                  <span class="badge rounded-pill p-2 <%=badgeClass%>">
                                    <%=item.status %>
                                  </span>
                              </td>
                              <td>
                                <div style="max-width: 150px;">
                                  <%=item.casts %>
                                </div>
                              </td>
                              <td class="text-center">
                                <%=item.releasedate %>
                              </td>
                              <td class="text-center">
                                <a href="/programs/show_poster?programid=<%=item.programid%>&programname=<%=item.programname%>&poster=<%=item.poster%>&video=<%=item.video%>">
                                  <img src="/images/<%=item.poster%>" class="poster-img"
                                    style="width: 80px; height: 110px; object-fit: cover;"
                                    alt="<%=item.programname%> Poster"
                                    onerror="this.src='/images/default-poster.png'" />
                                </a> 
                              </td>
                              <td class="text-center">
                      
                                  <video id="videoPreview"
                                    style="width: 200px; height: 100px; border-radius: 10px; object-fit: cover; background-color: #000; cursor: pointer;"
                                    poster="/images/video poster.png"
                                    controls>
                                    <source src="/videos/<%=item.video%>">
                                  </video>
                                
                              </td>
                              </td>
                              <td class="text-center">
                                <a href="/programs/edit_delete_display?programid=<%=item.programid%>"
                                  class="btn btn-outline-warning btn-lg" style="margin: 10px;">
                                  <i class="fa-solid fa-pen-to-square"></i>
                                </a>
                                <a href="/programs/edit_delete_display?programid=<%=item.programid%>"
                                  class="btn btn-outline-danger btn-lg">
                                  <i class="fa-solid fa-trash"></i>
                                </a>
                              </td>
                            </tr>
                            <%})%>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
                

                <% } %>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>